<div class="row">
    <div class="col-sm">
        <table class="table table-striped">
            {% include 'aiohttp_admin/blocks/list_objects_header_block.html' %}
            <tbody>
                {%- for obj in list.instances %}
                <tr>
                    {% for field in controller.inline_fields %}
                    <td>
                        {% if loop.first %}
                        <input class="index-checkbox" type="checkbox" />
                        {% if controller.can_update %}
                            {% if detail_nested_url is defined %}
                                <a href="{{ url(detail_nested_url, pk=pk, nested_pk=obj.id) }}">
                            {% else %}
                                <a href="{{ url(detail_url, pk=obj.id) }}">
                            {% endif %}
                            {% endif %}
                        {% endif %}
                        {% if hasattr(controller, "{}_field".format(field)) %}
                            {{ getattr(controller, "{}_field".format(field))(obj)|safe }}
                        {% else %}
                            {{ obj|attr(field) }}
                        {% endif %}
                        {% if loop.first %}
                        {% if controller.can_update %}
                        </a>
                        {% endif %}
                        {% endif %}
                    </th>
                    {% endfor %}
                </tr>
                {%- endfor %}
            </tbody>
        </table>
    </div>
    {% if controller.list_filter %}
    <nav class="filter-nav col-3">
        <p class="filter-nav-title">Filters</p>
        <div>
            {% for f in controller.list_filter %}
                {% set field = controller.mapper({})._fields.get(f) %}
                {% set filter = controller_view.default_filter_map.get(field.type_name) %}
                {% if field and filter %}
                    <p class="filter-title">By {{ f }}</p>
                    {% from filter.template_name import filter as filter_macro with context %}

                    {{ filter_macro(field, filter(field.name, request.rel_url.query)) }}
                {% endif %}
            {% endfor %}
        </div>
    </nav>
    {% endif %}
</div>
