{% extends 'admin/base.html' %}
{% from "admin/paggination.html" import paggination %}


{% block main %}
<div class="wrapper">
{% include 'admin/list_action_buttons.html' %}

<table class="table table-striped">
    <thead>
        <tr>
            {% with isDesc=(request.rel_url.query.get('sortDir') == 'desc') %}
            <th scope="col">
                <a href="{{ newParam({'sort': 'user_id', 'sortDir': 'asc' if isDesc else 'desc'}, request.rel_url.query) }}">
                    #
                    {% if request.rel_url.query.get('sort') == 'user_id' %}
                        {% if isDesc %}
                        <i class="material-icons">arrow_upward</i>
                        {% else %}
                        <i class="material-icons">arrow_downward</i>
                        {% endif %}
                    {% endif %}
                </a>
            </th>
            {% for field in view.inline_fields %}
            <th scope="col">
                {% if field not in view.read_only_fields %}
                <a href="{{ newParam({'sort': field, 'sortDir': 'asc' if isDesc else 'desc'}, request.rel_url.query) }}">
                    {{ field }}
                    {% if request.rel_url.query.get('sort') == field %}
                        {% if isDesc %}
                        <i class="material-icons">arrow_upward</i>
                        {% else %}
                        <i class="material-icons">arrow_downward</i>
                        {% endif %}
                    {% endif %}
                </a>
                {% else %}
                {{ field }}
                {% endif %}
            </th>
            {% endfor %}
            {% endwith %}
        </tr>
    </thead>
    <tbody>
        {%- for obj in list.list_result %}
        <tr>
            <th scope="row">
                <input class="index-checkbox" type="checkbox" />
                <a href="{{ url(edit_url_name, id=obj.user_id)}}">
                    {{obj.user_id}}
                </a>
            </th>
            {% for field in view.inline_fields %}
            <td>
                {% if field in view.read_only_fields %}
                    {{ view.get_read_only_field(field, obj)|safe }}
                {% else %}
                    {{ obj|attr(field) }}
                {% endif %}
            </th>
            {% endfor %}
        </tr>
        {%- endfor %}
    </tbody>
</table>

<!-- paggination -->
{{ 
    paggination(
        list.active_page,
        list.count_items,
        list.has_next,
        list.has_prev,
        list.per_page,
        request.rel_url.query,
    )
}}

</div>
{% endblock %}
